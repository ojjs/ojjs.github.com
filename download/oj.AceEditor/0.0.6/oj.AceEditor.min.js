// oj.AceEditor.min.js v0.0.6 | Copyright 2013 Evan Moran | ojjs.org/license
(function(){var e,t=function(t,n){if(t.isClient&&!t.isDefined(ace))throw new Error("oj.AceEditor: ace not found");typeof n!="object"&&(n={});var r=t.createType("AceEditor",{base:t.ModelKeyView,constructor:function(){var n=t.unionArguments(arguments),i=n.options,s=n.args,o={width:400,height:200,fontSize:14,showFoldWidgets:!1,showPrintMargin:!1,useSoftTabs:!0,behaviorsEnabled:!0,foldStyle:"markbegin",hScrollBarAlwaysVisible:!1,vScrollBarAlwaysVisible:!1,useWorker:!1};for(k in o)i[k]==null&&(i[k]=o[k]);var u=this._getVersion(),a=this;this.el=t(function(){t.div(function(){u.major==-1?t.div({c:"oj-AceEditor-editor",style:{position:"absolute",width:i.width,height:i.height}}):t.TextArea({c:"oj-AceEditor-editor",change:function(){typeof a.viewChanged=="function"&&a.viewChanged(),typeof a.change=="function"&&a.change()},style:{backgroundColor:"#FEFAF3",color:"#586E75",border:"none",position:"absolute",fontSize:i.fontSize,width:i.width,fontFamily:"Monaco,Menlo,Ubuntu Mono,Consolas,source-code-pro,monospace",height:i.height}})},{style:{position:"relative",width:i.width,height:i.height}})}),this.$editor=this.$(".oj-AceEditor-editor");if(u.major==-1){if(t.isClient&&typeof ace!="undefined"){this.editor=ace.edit(this.$editor.get(0)),this.editor.resize();var a=this;this.session.doc.on("change",e(50,function(){typeof a.viewChanged=="function"&&a.viewChanged(),typeof a.change=="function"&&a.change()}))}}else this._editor={width:function(){},height:function(){},getSession:function(){return{doc:{on:function(){}},getValue:function(){},setValue:function(){},getMode:function(){return{$id:"js"}},setMode:function(){},getTabSize:function(){return 2},setTabSize:function(){},setFoldStyle:function(){},getUseSoftTabs:function(){return!0},setUseSoftTabs:function(){},getUseWrapMode:function(){},setUseWrapMode:function(){},getWrapLimitRange:function(){},setWrapLimitRange:function(){},getUseWorker:function(){},setUseWorker:function(){}}},setSession:function(){},renderer:{getShowGutter:function(){},setShowGutter:function(){},getPrintMarginColumn:function(){},setPrintMarginColumn:function(){},getHScrollBarAlwaysVisible:function(){},setHScrollBarAlwaysVisible:function(){}},getTheme:function(){},setTheme:function(){},resize:function(){},getReadOnly:function(){},setReadOnly:function(){},setFontSize:function(){},getCursorPosition:function(){},moveCursorToPosition:function(){},getShowPrintMargin:function(){},setShowPrintMargin:function(){},getShowInvisibles:function(){},setShowInvisibles:function(){},getDisplayIndentGuides:function(){},setDisplayIndentGuides:function(){},getShowFoldWidgets:function(){},setShowFoldWidgets:function(){},getHighlightSelectedWord:function(){},setHighlightSelectedWord:function(){},getHighlightActiveLine:function(){},setHighlightActiveLine:function(){},getBehavioursEnabled:function(){},setBehavioursEnabled:function(){}};var f=["theme","mode","width","height","wrapLimit","showPrintMargin","readOnly","fontSize","tabSize","foldStyle","selectionStyle","showPrintMargin","showInvisibles","showGutter","showIndentGuides","showFoldWidgets","highlightSelectedWord","highlightActiveLine","useSoftTabs","useWrapMode","wrapLimitRange","printMarginColumn","animatedScroll","useWorker","hScrollBarAlwaysVisible","vScrollBarAlwaysVisible","fadeFoldWidgets","behaviorsEnabled"];for(var l=0;l<f.length;l++){var c=f[l];i[c]!=null&&(this[c]=t.argumentShift(i,c))}value=t.argumentShift(i,"value")||s.join("\n"),r.base.constructor.apply(this,[i]),this.$scrollbar=this.$(".ace_scrollbar"),this.$scroller=this.$(".ace_scroller"),this.$content=this.$(".ace_content"),value&&(this.value=value)},properties:{value:{get:function(){if(this._isVer)return this._verEditor.value;if(this.session)return this.session.getValue()},set:function(e){if(this.session){var t=this.cursorPosition;this.session.setValue(e),this.cursorPosition=t,this._isVer&&(this._verEditor.value=e)}}},editor:{get:function(){return this._editor},set:function(e){this._editor=e}},session:{get:function(){if(this.editor)return this.editor.getSession()},set:function(e){this.editor&&this.editor.setSession(e)}},renderer:{get:function(){if(this.editor)return this.editor.renderer}},change:{get:function(){return this._change},set:function(e){this._change=e}},eventHandler:{get:function(){return this._eventHandler||(this._eventHandler=ace.require("ace/lib/event"))}},containerEl:{get:function(){return this._container||(this._container=this.$(".editor-container")[0])}},theme:{get:function(){if(!this.editor)return;var e=this.editor.getTheme(),t="ace/theme/";return e&&e.indexOf(t)===0&&(e=e.slice(t.length)),e},set:function(e){if(!this.editor)return;var t="ace/theme/";e&&e.indexOf(t)!=0&&(e=t+e),this.editor.setTheme(e)}},mode:{get:function(){if(!this.session)return;var e=this.session.getMode().$id,t="ace/mode/";return e&&e.indexOf(t)===0&&(e=e.slice(t.length)),e},set:function(e){if(!this.session)return;var t="ace/mode/";e&&e.indexOf(t)!=0&&(e=t+e),this.session.setMode(e)}},width:{get:function(){return this.$el.width()},set:function(e){this.$el.width(e),this.updateWidth()}},height:{get:function(){return this.$el.height()},set:function(e){this.$el.height(e),this.$editor.height(e),this.editor&&this.editor.resize()}},wrapLimit:{get:function(){if(this.session)return this.wrapLimitRange},set:function(e){this.session&&(!e||e==="off"?(this.useWrapMode=!1,this.printMarginColumn=80):e==="auto"?(this.useWrapMode=!0,this.wrapLimitRange=null,this.printMarginColumn=80):typeof e=="number"&&(this.wrapLimitRange=e,this.printMarginColumn=e,this.useWrapMode=!0))}},readOnly:{get:function(){if(this.editor)return this.editor.getReadOnly()},set:function(e){this.editor&&this.editor.setReadOnly(e)}},fontSize:{get:function(){if(this.editor)return this._fontSize},set:function(e){this.editor&&(this.editor.setFontSize(e),this._fontSize=e)}},tabSize:{get:function(){if(this.editor)return this.session.getTabSize()},set:function(e){this.editor&&this.session.setTabSize(e)}},cursorPosition:{get:function(){if(this.editor)return this.editor.getCursorPosition()},set:function(e){this.editor&&this.editor.moveCursorToPosition(e)}},showPrintMargin:{get:function(){if(this.editor)return this.editor.getShowPrintMargin()},set:function(e){this.editor&&this.editor.setShowPrintMargin(e)}},showInvisibles:{get:function(){if(this.editor)return this.editor.getShowInvisibles()},set:function(e){this.editor&&this.editor.setShowInvisibles(e)}},showGutter:{get:function(){if(this.editor)return this.renderer.getShowGutter()},set:function(e){this.editor&&this.renderer.setShowGutter(e)}},showIndentGuides:{get:function(){if(this.editor)return this.editor.getDisplayIndentGuides()},set:function(e){this.editor&&this.editor.setDisplayIndentGuides(e)}},showFoldWidgets:{get:function(){if(this.editor)return this.editor.getShowFoldWidgets()},set:function(e){this.editor&&this.editor.setShowFoldWidgets(e)}},highlightSelectedWord:{get:function(){if(this.editor)return this.editor.getHighlightSelectedWord()},set:function(e){this.editor&&this.editor.setHighlightSelectedWord(e)}},highlightActiveLine:{get:function(){if(this.editor)return this.editor.getHighlightActiveLine()},set:function(e){this.editor&&this.editor.setHighlightActiveLine(e)}},selectionStyle:{get:function(){if(this.editor)return this.editor.getSelectionStyle()||"line"},set:function(e){if(this.editor){if(e!=="line"&&e!=="text")throw new Error("oj.AceEditor: selectionStyle expects 'line' or 'text'");this.editor.setSelectionStyle(e)}}},foldStyle:{get:function(){if(this.session)return this._foldStyle},set:function(e){this.session&&(this._foldStyle=e,this.session.setFoldStyle(e))}},behaviorsEnabled:{get:function(){if(this.editor)return this.editor.getBehavioursEnabled()},set:function(e){this.editor&&this.editor.setBehavioursEnabled(e)}},useSoftTabs:{get:function(){if(this.session)return this.session.getUseSoftTabs()},set:function(e){this.session&&this.session.setUseSoftTabs(e)}},useWrapMode:{get:function(){if(this.session)return this.session.getUseWrapMode()},set:function(e){this.session&&this.session.setUseWrapMode(e)}},wrapLimitRange:{get:function(){if(this.session)return this.session.getWrapLimitRange()},set:function(e){this.session&&this.session.setWrapLimitRange(e,e)}},printMarginColumn:{get:function(){if(this.renderer)return this.renderer.getPrintMarginColumn()},set:function(e){this.renderer&&this.renderer.setPrintMarginColumn(e)}},animatedScroll:{get:function(){if(this.editor)return this.editor.getAnimatedScroll()},set:function(e){this.editor&&this.editor.setAnimatedScroll(e)}},useWorker:{get:function(){if(this.session)return this.session.getUseWorker()},set:function(e){this.session&&this.session.setUseWorker(e)}},hScrollBarAlwaysVisible:{get:function(){if(this.editor)return this.renderer.getHScrollBarAlwaysVisible()},set:function(e){this.editor&&this.renderer.setHScrollBarAlwaysVisible(e)}},vScrollBarAlwaysVisible:{get:function(){return this._vScrollBarAlwaysVisible||!1},set:function(e){this._vScrollBarAlwaysVisible=e,this.$scrollbar!=null&&(e?(this.$scrollbar.show(),this.updateWidth()):(this.$scrollbar.hide(),this.updateWidth()))}},fadeFoldWidgets:{get:function(){if(this.editor)return this.editor.getFadeFoldWidgets()},set:function(e){this.editor&&this.editor.setFadeFoldWidgets(e)}},$scrollbar:null,$scroller:null,$content:null,_isVer:{get:function(){return this._getVersion().major!=-1}},_verEditor:{get:function(){return this._isVer?this.$editor.get(0).oj:null}}},methods:{viewChanged:function(){r.base.inserted.apply(this,arguments)},inserted:function(){r.base.inserted.apply(this,arguments),this.value=this.value,this.vScrollBarAlwaysVisible=this.vScrollBarAlwaysVisible},updateWidth:function(){var e=this.width;widthScroll=this.vScrollBarAlwaysVisible?0:this.scrollWidth(),this.$editor.width(e+widthScroll),this.editor&&this.editor.resize()},scrollWidth:function(){if(this._scrollWidth!=null)return this._scrollWidth;if(this.isInserted){var e=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(e);var t=$("div",e).innerWidth();e.css("overflow-y","scroll");var n=$("div",e).innerWidth();return $(e).remove(),this._scrollWidth=t-n}},_getVersion:function(){if(t.isClient){var e=navigator.userAgent,n=/MSIE\s?(\d+)(?:\.(\d+))?/i,r=e.match(n);if(r!=null)return{major:r[1],minor:r[2]}}return{major:"-1",minor:"-1"}}}});return{AceEditor:r}};e=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=t.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,e),a&&(i=t.apply(s,o)),i}},typeof oj!="undefined"&&oj.use(t),typeof module!="undefined"&&typeof module.exports!="undefined"&&(module.exports=t)})(this)