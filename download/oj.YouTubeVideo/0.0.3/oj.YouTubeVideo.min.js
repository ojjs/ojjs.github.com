// oj.YouTubeVideo.min.js v0.0.3 | Copyright 2013 Evan Moran | ojjs.org/license
(function(e,t){typeof module=="object"&&module.exports?module.exports=t(e):typeof define=="function"&&define.amd?define(function(){return t(e)}):t(e,e.oj)})(this,function(e,t){var n=function(e,t){typeof t!="object"&&(t={});var n=e.createType("YouTubeVideo",{base:e.View,constructor:function(){var t=this,r=e.unionArguments(arguments),i=r.options,s=r.args;s.length>0&&(this.video=s[0]);var o=["width","height","video","autoplay","volume","mute","playbackRate"];for(var u=0;u<o.length;u++){var a=o[u];i[a]!=null&&(this[a]=e.argumentShift(i,a))}this.el=e(function(){e.iframe({src:t.src,type:"text/html",width:t.width,height:t.height,frameborder:0,webkitAllowFullScreen:1,mozallowfullscreen:1,allowFullScreen:1})}),n.base.constructor.apply(this,[i]),this.loadYouTubeAPI()},properties:{width:{get:function(){return this._width||300},set:function(e){this._width=e,this.isConstructed&&this.$el.attr("width",e)}},height:{get:function(){return this._height||170},set:function(e){this._height=e,this.isConstructed&&this.$el.attr("height",e)}},volume:{get:function(){return this._volume!=null?this._volume:1},set:function(e){this._volume=Math.min(Math.max(e,0),1),this.player&&this.player.setVolume(this._volume*100)}},mute:{get:function(){return this._mute!=null?this._mute:!1},set:function(e){this._mute=!!e,this.player&&(this._mute?this.player.mute():this.player.unMute())}},playbackRate:{get:function(){return this._playbackRate!=null?this._playbackRate:1},set:function(e){this._playbackRate=e,this.player&&this.player.setPlaybackRate(e)}},availablePlaybackRates:{get:function(){return this.player?this.player.getAvailablePlaybackRates():[1]}},player:null,video:{get:function(){return this._video||"t-FUTp_oO5s"},set:function(e){this._video=e,this.player&&this.player.setVideo(e)}},origin:{get:function(){return!e.isClient||window.location.protocol==="file:"?null:this._origin?this._origin:this._origin=window.location.protocol+"//"+window.location.hostname},set:function(e){this._origin=e}},autoplay:!1,loop:{get:function(){return this._loop||!1},set:function(e){this._loop=e,this.player&&this.player.setLoop(e)}},src:{get:function(){var e=this.videoOptions,t="http://www.youtube.com/embed/"+this.video+"?autoplay="+e.autoplay;e.origin&&(t+="origin="+e.origin);for(k in e)t+="&"+k+"="+e[k];return t}},videoOptions:{get:function(){return{autoplay:this.autoplay?1:0}}},playerStateChanged:function(e,t){}},methods:{loadYouTubeAPI:function(){var t=this;if(e.isClient&&!n._loaded){var r=/^http:/.test(document.location)?"http":"https",i=r+"://www.youtube.com/iframe_api";$.ajax({url:i,cache:!0,dataType:"script"}).always(function(e){}),n._loaded=!0}},youtubeAPILoaded:function(){var e=this;new YT.Player(this.id,{events:{onStateChange:function(){e._onPlayerStateChange.apply(e,arguments)},onReady:function(t){e.player=t.target,e._onPlayerReady.apply(e,arguments)}}})},play:function(){this.player&&this.player.playVideo()},stop:function(){this.player&&this.player.stopVideo()},pause:function(){this.player&&(this._playing=!1,this.player.pauseVideo())},playToggle:function(){this._playing?this.pause():this.play()},muteToggle:function(){this.mute=!this.mute},seekTo:function(e,t){this.player&&this.player.seekTo(e,t)},_onPlayerReady:function(e){this.mute=this.mute,this.volume=this.volume,this.playbackRate=this.playbackRate},_onPlayerStateChange:function(e){this._playing=!1;switch(e.data){case-1:this._state="stopped";break;case 0:this._state="ended";break;case 1:this._state="playing",this._playing=!0;break;case 2:this._state="paused";break;case 3:this._state="buffering";case 4:this._state="cued"}this.playerStateChanged&&this.playerStateChanged(this._state,e.target)}}});return e.isClient&&(window.onYouTubeIframeAPIReady=n.onYouTubeIframeAPIReady=function(){$(".oj-YouTubeVideo").each(function(){this.oj.youtubeAPILoaded()})}),{YouTubeVideo:n}};return typeof t!="undefined"&&t.use(n),n})